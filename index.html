<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yihan Zhang | Researcher & Builder</title>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Marked for Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">

    <style>
        /* MoMA Style Typography & Base */
        body {
            font-family: 'Inter', sans-serif;
            /* Clean Sans-Serif like Helvetica */
            background-color: #ffffff;
            color: #111;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        h1,
        h2,
        h3,
        h4,
        .serif {
            font-family: 'Playfair Display', serif;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar - Minimalist */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #fff;
        }

        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* PDF Container */
        .pdf-container {
            height: 800px;
            width: 100%;
            border: 1px solid #f3f4f6;
            background: #f9fafb;
        }

        /* Image Placeholder Styling - Architectural */
        .img-placeholder {
            background-color: #f3f4f6;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            text-align: center;
            border: 1px solid #e5e7eb;
            transition: all 0.4s ease;
            width: 100%;
            height: 100%;
            min-height: 240px;
        }

        .img-placeholder:hover {
            background-color: #e5e7eb;
            color: #111;
            border-color: #d1d5db;
        }

        /* Animated Blobs */
        @keyframes blob {
            0% {
                transform: translate(0px, 0px) scale(1);
            }

            33% {
                transform: translate(30px, -50px) scale(1.1);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }

            100% {
                transform: translate(0px, 0px) scale(1);
            }
        }

        .animate-blob {
            animation: blob 12s infinite ease-in-out;
        }

        .animation-delay-2000 {
            animation-delay: 2s;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        // --- COMPONENTS ---

        // 1. Navigation (Clean & Academic)
        const Navbar = ({ activeSection, setActiveSection }) => {
            const navItems = [
                { id: 'home', label: 'Overview' },
                { id: 'news', label: 'News' },
                { id: 'research', label: 'Research' },
                { id: 'projects', label: 'Projects' },
                { id: 'art', label: 'Art Gallery' },
                { id: 'cv', label: 'CV' },
            ];

            return (
                <nav className="fixed w-full z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100 transition-all duration-300">
                    <div className="max-w-7xl mx-auto px-6 lg:px-8">
                        <div className="flex justify-between items-center h-20">
                            <a href="#" onClick={() => setActiveSection('home')} className="text-lg font-serif font-bold tracking-tight z-50 cursor-pointer">
                                Yihan Zhang
                            </a>

                            <div className="hidden md:flex space-x-8 text-sm font-medium text-gray-500">
                                {navItems.map((item) => (
                                    <button
                                        key={item.id}
                                        onClick={() => setActiveSection(item.id)}
                                        className={`nav-btn transition-colors hover:text-black ${activeSection === item.id ? 'text-black font-semibold' : ''}`}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                            </div>

                            <div className="flex gap-4">
                                <a href="04_Yihan Zhang_CV.pdf" target="_blank" className="hidden sm:flex items-center gap-2 text-xs font-medium text-gray-900 border border-gray-200 px-4 py-2 rounded-full hover:bg-gray-50 transition">
                                    CV / Resume
                                </a>
                                <a href="mailto:zhayihan@unc.edu" className="bg-black text-white px-5 py-2 rounded-full text-xs font-medium hover:bg-gray-800 transition-all">
                                    Get in Touch
                                </a>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        };

        // 2. Hero Section
        const Hero = ({ setActiveSection }) => (
            <section className="min-h-screen flex items-center justify-center relative overflow-hidden pt-20 bg-white">
                <div className="absolute top-0 left-1/4 w-[500px] h-[500px] bg-gray-100 rounded-full mix-blend-multiply filter blur-[128px] opacity-70 animate-blob"></div>
                <div className="absolute top-0 right-1/4 w-[400px] h-[400px] bg-blue-50 rounded-full mix-blend-multiply filter blur-[128px] opacity-60 animate-blob animation-delay-2000"></div>

                <div className="max-w-6xl mx-auto px-6 z-10 relative grid md:grid-cols-12 gap-16 items-center">
                    <div className="md:col-span-7">
                        <motion.div
                            initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}
                            className="inline-flex items-center gap-2 px-3 py-1 rounded border border-gray-200 bg-white mb-8"
                        >
                            <span className="relative flex h-2 w-2">
                                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                <span className="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                            </span>
                            <span className="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Open for PhD Opportunities Fall 2026</span>
                        </motion.div>

                        <motion.h1
                            initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}
                            className="text-6xl md:text-8xl font-medium tracking-tighter mb-8 leading-[1.05] text-gray-900"
                        >
                            The Pragmatic <br />
                            <span className="serif italic text-gray-400">Idealist.</span>
                        </motion.h1>

                        <motion.p
                            initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }}
                            className="text-lg text-gray-600 max-w-xl leading-relaxed font-light mb-10"
                        >
                            Bridging <strong>Industrial Hardware</strong>, <strong>Full-Stack Prototyping</strong>, and <strong>Behavioral Data Science</strong> to build Human-Centered Intelligent Systems.
                        </motion.p>

                        <motion.div
                            initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.8 }}
                            className="flex flex-wrap gap-4"
                        >
                            <button onClick={() => setActiveSection('projects')} className="px-8 py-3 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-800 hover:scale-105 transition-all duration-300 shadow-xl">
                                View Portfolio
                            </button>

                            <a href="02_Research_Statement_Yihan_Zhang.pdf" target="_blank" className="px-8 py-3 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-full hover:border-gray-400 transition-all duration-300">
                                Research Statement
                            </a>
                        </motion.div>
                    </div>

                    <div className="md:col-span-5 relative hidden md:block">
                        {/* Academic Profile Image Placeholder */}
                        <motion.div
                            initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.5 }}
                            className="aspect-[4/5] bg-gray-50 border border-gray-100 p-2 rounded-sm shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-700"
                        >
                            <div className="w-full h-full bg-gray-200 flex flex-col items-center justify-center text-gray-400 font-mono text-xs space-y-2">
                                <i data-lucide="user" className="w-8 h-8 mb-2"></i>
                                <span>[Portrait Placeholder]</span>
                                <span>Upload: index_profile.jpg</span>
                            </div>
                        </motion.div>
                    </div>
                </div>
            </section>
        );

        // 3. Stats Bar (Restored)
        const Stats = () => (
            <div className="bg-white border-t border-b border-gray-100 py-12">
                <div className="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-12 text-center">
                    {[
                        { val: "¥40B", label: "Indus. R&D Context" },
                        { val: "2", label: "Granted Patents" },
                        { val: "4.0", label: "Recent Term GPA" },
                        { val: "Top 2", label: "UNC MakerFest" }
                    ].map((stat, i) => (
                        <motion.div
                            key={i}
                            initial={{ opacity: 0, y: 20 }}
                            whileInView={{ opacity: 1, y: 0 }}
                            viewport={{ once: true }}
                            transition={{ delay: i * 0.1 }}
                        >
                            <div className="text-3xl font-serif font-bold text-gray-900">{stat.val}</div>
                            <div className="text-xs text-gray-500 font-semibold uppercase tracking-widest mt-2">{stat.label}</div>
                        </motion.div>
                    ))}
                </div>
            </div>
        );

        // 4. News Section
        const NewsSection = () => (
            <section className="py-24 bg-white border-t border-gray-100">
                <div className="max-w-4xl mx-auto px-6">
                    <div className="flex items-baseline gap-4 mb-12">
                        <h2 className="text-xl font-serif font-bold text-black">News & Updates</h2>
                        <div className="h-px bg-gray-200 flex-1"></div>
                    </div>

                    <div className="space-y-10 border-l border-gray-200 pl-8 ml-3">
                        {[
                            { date: "May 2025", title: "Selected Exhibitor @ UNC Smart Design Showcase", desc: "Presented 'Chill by U' laptop stand." },
                            { date: "Spring 2025", title: "Academic Achievement", desc: "Achieved 4.00 GPA with maximum course load (18 credits)." },
                            { date: "2024", title: "Award Winner @ UNC MakerFest", desc: "Won 2nd Most Creative Prize for innovative hardware design." },
                            { date: "2022", title: "Competition Winner", desc: "3rd Prize in Sustainable Campus Design Competition." }
                        ].map((item, i) => (
                            <div key={i} className="relative group">
                                <div className="absolute -left-[38px] top-1.5 w-5 h-5 bg-white border border-gray-300 rounded-full group-hover:border-black group-hover:bg-black transition-all"></div>
                                <span className="text-xs font-mono text-gray-400 mb-1 block uppercase tracking-wider">{item.date}</span>
                                <h3 className="text-base font-medium text-gray-900 group-hover:translate-x-1 transition-transform">{item.title}</h3>
                                <p className="text-sm text-gray-500 mt-1 font-light">{item.desc}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>
        );

        // 5. Research & Philosophy
        const Research = () => (
            <section className="py-32 bg-gray-50">
                <div className="max-w-6xl mx-auto px-6">
                    <div className="mb-16">
                        <h2 className="text-3xl font-serif font-bold text-gray-900 mb-6">Research Framework</h2>
                        <p className="text-gray-600 max-w-3xl text-lg font-light leading-relaxed">
                            My work focuses on the <strong>"Intelligent Design Framework for Urban Micro-Interaction Systems"</strong>.
                            I build systems that are <strong>Deployable</strong> (real-world hardware), <strong>Measurable</strong> (collecting behavioral data), and <strong>Publishable</strong>.
                        </p>
                    </div>

                    <div className="grid md:grid-cols-2 gap-12">
                        {/* Column 1: Publications */}
                        <div className="bg-white p-8 rounded-sm border border-gray-200 shadow-sm">
                            <h3 className="text-lg font-bold uppercase tracking-widest mb-6 border-b border-gray-100 pb-2">Publications & Manuscripts</h3>
                            <ul className="space-y-6">
                                <li className="group cursor-pointer">
                                    <a href="07_Offline Oracle_ A Gamified Framework.pdf" target="_blank">
                                        <h4 className="text-lg font-serif font-medium text-gray-900 group-hover:text-blue-700 transition-colors leading-snug">
                                            Offline Oracle: A Gamified Framework for Diagnosing "True Needs"
                                        </h4>
                                        <p className="text-xs text-gray-500 mt-2 font-mono">
                                            <span className="text-black font-semibold">Yihan Zhang</span>. <em>Draft / Project Paper.</em>
                                        </p>
                                        <div className="mt-3 flex gap-2">
                                            <span className="px-2 py-1 bg-blue-50 text-blue-600 text-[10px] uppercase tracking-wide rounded">HCI</span>
                                            <span className="px-2 py-1 bg-gray-50 text-gray-600 text-[10px] uppercase tracking-wide rounded">Gamification</span>
                                        </div>
                                    </a>
                                </li>
                                <li className="group cursor-pointer pt-6 border-t border-gray-50">
                                    <a href="02_Research_Statement_Yihan_Zhang.pdf" target="_blank">
                                        <h4 className="text-lg font-serif font-medium text-gray-900 group-hover:text-blue-700 transition-colors leading-snug">
                                            Research Statement: Intelligent Design Framework for Urban Systems
                                        </h4>
                                        <p className="text-xs text-gray-500 mt-2 font-mono">
                                            <span className="text-black font-semibold">Yihan Zhang</span>. <em>UNC Chapel Hill.</em>
                                        </p>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        {/* Column 2: Patents & Framework */}
                        <div className="space-y-6">
                            {/* Diagram Placeholder */}
                            <div className="w-full aspect-[16/9] img-placeholder bg-white rounded-sm">
                                <i data-lucide="network" className="w-8 h-8 mb-3 text-gray-300"></i>
                                <span>[Image: Research Framework Diagram]</span>
                                <span className="text-xs mt-1 text-gray-400">Visualizing the Perception-Decision-Execution Loop</span>
                            </div>

                            {/* Patents */}
                            <div className="bg-[#111] text-white p-8 rounded-sm">
                                <h3 className="text-sm font-bold uppercase tracking-widest mb-6 text-gray-400">Patents (Industry)</h3>
                                <div className="space-y-6">
                                    <div>
                                        <h4 className="font-serif text-lg text-white">Disc-Tube Reverse Osmosis Apparatus</h4>
                                        <div className="flex justify-between items-center mt-1">
                                            <span className="text-xs font-mono text-gray-500">CN209791046U</span>
                                            <span className="text-[10px] bg-white text-black px-2 py-0.5 rounded font-bold">First Inventor</span>
                                        </div>
                                    </div>
                                    <div className="h-px bg-gray-800"></div>
                                    <div>
                                        <h4 className="font-serif text-lg text-white">Kitchen Waste Extraction Device</h4>
                                        <div className="flex justify-between items-center mt-1">
                                            <span className="text-xs font-mono text-gray-500">CN215209304U</span>
                                            <span className="text-[10px] border border-gray-600 text-gray-400 px-2 py-0.5 rounded">2nd Inventor</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        );

        // 6. Projects Section
        const Projects = () => {
            const works = [
                {
                    id: 'offline',
                    title: 'Offline Oracle',
                    cat: 'HCI & Health',
                    desc: 'A hybrid physical-digital framework (Box + App) to diagnose and fulfill "True Needs" behind digital overuse.',
                    link: '07_Offline Oracle_ A Gamified Framework.pdf',
                    placeholder: '[Image: Offline Oracle Device]'
                },
                {
                    id: 'tempest',
                    title: 'TEMPEST Robot',
                    cat: 'Autonomous Robotics',
                    desc: 'Low-cost autonomous surface vessel for urban waterways. Tackled perception and navigation challenges.',
                    link: '03_Research-portfolio_Yihan.pdf',
                    placeholder: '[Image: TEMPEST Robot on Water]'
                },
                {
                    id: 'smartcan',
                    title: 'SmartCan',
                    cat: 'Behavioral Design',
                    desc: 'Intelligent waste sorting assistant using sensors and visual feedback to gamify disposal processes.',
                    link: '03_Research-portfolio_Yihan.pdf',
                    placeholder: '[Image: SmartCan Prototype]'
                },
                {
                    id: 'chill',
                    title: 'Chill by "U"',
                    cat: 'Fabrication & IoT',
                    desc: 'Modular laptop stand with adaptive cooling. 2nd Most Creative Prize at UNC MakerFest.',
                    link: '03_Research-portfolio_Yihan.pdf',
                    placeholder: '[Image: Laser Cut Stand]'
                },
                {
                    id: 'bird',
                    title: 'Smart Bird Feeder',
                    cat: 'Ecological IoT',
                    desc: 'Automated system utilizing light/weight sensors to distinguish target species. 90% recycled materials.',
                    link: '03_Research-portfolio_Yihan.pdf',
                    placeholder: '[Image: Bird Feeder Logic]'
                },
                {
                    id: 'gis',
                    title: 'Spatial Inequality',
                    cat: 'Data Science',
                    desc: 'Quantitative analysis of US Population Change & Global Coffee Trade inequalities using R and ArcGIS.',
                    link: '03_Research-portfolio_Yihan.pdf',
                    placeholder: '[Image: GIS Map Visualization]'
                }
            ];

            return (
                <section className="py-32 bg-white">
                    <div className="max-w-7xl mx-auto px-6">
                        <div className="mb-16">
                            <h2 className="text-3xl font-serif font-bold text-gray-900">Selected Projects</h2>
                        </div>

                        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16">
                            {works.map((work, i) => (
                                <div key={work.id} className="group flex flex-col h-full">
                                    <a href={work.link} target="_blank" className="block overflow-hidden mb-6 border border-gray-100 rounded-sm relative">
                                        {/* Placeholder */}
                                        <div className="aspect-[4/3] w-full img-placeholder bg-gray-50 group-hover:bg-gray-100 transition-colors">
                                            <i data-lucide="folder" className="w-6 h-6 mb-2 text-gray-300"></i>
                                            <span>{work.placeholder}</span>
                                        </div>

                                        {/* Hover Overlay */}
                                        <div className="absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors flex items-center justify-center">
                                            <div className="opacity-0 group-hover:opacity-100 transition-opacity bg-white px-4 py-2 rounded-full text-xs font-medium shadow-lg">
                                                View PDF
                                            </div>
                                        </div>
                                    </a>

                                    <div>
                                        <span className="text-xs font-mono text-gray-400 uppercase tracking-widest">{work.cat}</span>
                                        <h3 className="text-xl font-serif font-medium mt-2 mb-3 group-hover:underline decoration-1 underline-offset-4">{work.title}</h3>
                                        <p className="text-sm text-gray-600 font-light leading-relaxed">{work.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        // 7. MoMA Style Art Gallery
        const ArtGallery = () => (
            <section className="py-32 bg-white">
                <div className="max-w-[1600px] mx-auto px-6 lg:px-12">

                    {/* Gallery Header - MoMA style: Big, Plain, Helvetica-ish */}
                    <div className="mb-24 border-t border-black pt-8 flex flex-col md:flex-row justify-between items-start">
                        <div className="md:w-1/3">
                            <h2 className="text-4xl md:text-5xl font-sans font-bold tracking-tighter mb-6">
                                Art & Design<br />Gallery
                            </h2>
                        </div>
                        <div className="md:w-1/3">
                            <p className="text-sm md:text-base font-light leading-relaxed text-gray-800">
                                A curated selection of visual works exploring <strong>"Altered Landscapes"</strong> and structural transparency.
                                Included in the UNC Studio Art Minor portfolio.
                            </p>
                        </div>
                    </div>

                    {/* Masonry / Gallery Layout */}
                    <div className="grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12">

                        {/* Artwork 1: Photography (Large Feature) */}
                        <div className="md:col-span-8 flex flex-col gap-3">
                            <div className="w-full aspect-[3/2] img-placeholder bg-gray-100 border-none relative group">
                                <i data-lucide="camera" className="w-8 h-8 mb-2 text-gray-300"></i>
                                <span>[Image: Altered Landscape I]</span>
                                <span className="text-xs mt-1 text-gray-400">Double Exposure Photography</span>
                            </div>
                            <div className="flex justify-between items-baseline mt-2">
                                <div>
                                    <h4 className="text-sm font-bold">Altered Landscape</h4>
                                    <p className="text-xs text-gray-500 font-mono">Digital Photography, 2024</p>
                                </div>
                            </div>
                        </div>

                        {/* Artwork 2: Drawing (Vertical) */}
                        <div className="md:col-span-4 flex flex-col gap-3">
                            <div className="w-full aspect-[3/4] img-placeholder bg-gray-50 border-none">
                                <i data-lucide="pen-tool" className="w-8 h-8 mb-2 text-gray-300"></i>
                                <span>[Image: Layered Transparency]</span>
                            </div>
                            <div>
                                <h4 className="text-sm font-bold">Layered Transparency</h4>
                                <p className="text-xs text-gray-500 font-mono">Graphite on Paper</p>
                            </div>
                        </div>

                        {/* Artwork 3: Charcoal (Square) */}
                        <div className="md:col-span-4 flex flex-col gap-3">
                            <div className="w-full aspect-square img-placeholder bg-gray-50 border-none">
                                <i data-lucide="edit-3" className="w-8 h-8 mb-2 text-gray-300"></i>
                                <span>[Image: Structure 8]</span>
                            </div>
                            <div>
                                <h4 className="text-sm font-bold">Structure 8</h4>
                                <p className="text-xs text-gray-500 font-mono">Charcoal Study</p>
                            </div>
                        </div>

                        {/* Artwork 4: Cultural Stitch (Wide) */}
                        <div className="md:col-span-8 flex flex-col gap-3">
                            <div className="w-full aspect-[16/9] img-placeholder bg-gray-100 border-none">
                                <i data-lucide="feather" className="w-8 h-8 mb-2 text-gray-300"></i>
                                <span>[Image: Cultural Stitch]</span>
                            </div>
                            <div>
                                <h4 className="text-sm font-bold">Cultural Stitch</h4>
                                <p className="text-xs text-gray-500 font-mono">Graphite & Ink, 18x24"</p>
                            </div>
                        </div>

                    </div>

                    <div className="mt-24 border-b border-black"></div>
                </div>
            </section>
        );

        // 8. CV Section
        const CVSection = () => (
            <section className="py-32 bg-gray-50">
                <div className="max-w-5xl mx-auto px-6">
                    <div className="flex justify-between items-center mb-8 pb-4 border-b border-gray-200">
                        <h2 className="text-3xl font-serif font-bold text-gray-900">Curriculum Vitae</h2>
                        <a href="04_Yihan Zhang_CV.pdf" target="_blank" className="flex items-center gap-2 text-sm font-medium text-black hover:underline underline-offset-4">
                            <i data-lucide="download" className="w-4 h-4"></i> Download PDF
                        </a>
                    </div>

                    <div className="pdf-container bg-white shadow-sm">
                        <iframe src="04_Yihan Zhang_CV.pdf" className="w-full h-full" title="CV">
                            <p className="p-8 text-center text-gray-500">Your browser does not support PDFs. <a href="04_Yihan Zhang_CV.pdf" className="text-blue-600 underline">Download the PDF</a>.</p>
                        </iframe>
                    </div>
                </div>
            </section>
        );

        // 9. Chat Widget
        const ChatWidget = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([{
                role: 'ai',
                text: "Hi! I'm Yihan's digital assistant. Ask me about his **Research Framework**, **Patents**, or **Art Portfolio**."
            }]);
            const [input, setInput] = useState('');
            const [loading, setLoading] = useState(false);
            const messagesEndRef = useRef(null);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [messages]);

            const handleSend = async (text = input) => {
                if (!text.trim()) return;
                const userMsg = { role: 'user', text };
                setMessages(prev => [...prev, userMsg]);
                setInput('');
                setLoading(true);

                const apiKey = "";
                const systemPrompt = `You are Yihan Zhang's academic AI assistant. Highlight his "Deployable, Measurable, Publishable" framework, his patents (CN209791046U), and his art (MoMA style gallery).`;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ role: "user", parts: [{ text }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });
                    const data = await response.json();
                    const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "Please check the CV.";
                    setMessages(prev => [...prev, { role: 'ai', text: aiText }]);
                } catch (e) {
                    setMessages(prev => [...prev, { role: 'ai', text: "Offline. Refer to CV." }]);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="fixed bottom-8 right-8 z-50 font-sans">
                    <AnimatePresence>
                        {isOpen && (
                            <motion.div
                                initial={{ opacity: 0, scale: 0.9, y: 20 }}
                                animate={{ opacity: 1, scale: 1, y: 0 }}
                                exit={{ opacity: 0, scale: 0.9, y: 20 }}
                                className="absolute bottom-20 right-0 w-[360px] h-[500px] bg-white rounded shadow-2xl border border-gray-200 flex flex-col overflow-hidden"
                            >
                                <div className="p-4 bg-gray-50 border-b border-gray-100 flex justify-between items-center">
                                    <span className="font-bold text-sm">AI Assistant</span>
                                    <button onClick={() => setIsOpen(false)}><i data-lucide="x" className="w-4 h-4 text-gray-400"></i></button>
                                </div>
                                <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-white">
                                    {messages.map((m, i) => (
                                        <div key={i} className={`p-3 rounded text-sm ${m.role === 'ai' ? 'bg-gray-100' : 'bg-black text-white ml-auto max-w-[85%]'}`}>
                                            <div dangerouslySetInnerHTML={{ __html: marked.parse(m.text) }} />
                                        </div>
                                    ))}
                                    {loading && <div className="text-xs text-gray-400 animate-pulse ml-2">Thinking...</div>}
                                    <div ref={messagesEndRef} />
                                </div>
                                <div className="p-3 border-t border-gray-100">
                                    <div className="flex gap-2 mb-2 overflow-x-auto pb-1 no-scrollbar">
                                        {['Research', 'Art', 'Patents'].map(q => (
                                            <button key={q} onClick={() => handleSend(q)} className="text-xs border px-2 py-1 rounded hover:bg-gray-50">{q}</button>
                                        ))}
                                    </div>
                                    <div className="flex gap-2">
                                        <input value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSend()} placeholder="Type a message..." className="flex-1 border rounded px-2 py-1 text-sm" />
                                        <button onClick={() => handleSend()} className="bg-black text-white p-1.5 rounded"><i data-lucide="arrow-up" className="w-4 h-4"></i></button>
                                    </div>
                                </div>
                            </motion.div>
                        )}
                    </AnimatePresence>
                    <button onClick={() => setIsOpen(!isOpen)} className="bg-black text-white p-4 rounded-full shadow-xl hover:scale-110 transition-transform">
                        <i data-lucide="sparkles" className="w-6 h-6"></i>
                    </button>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [activeSection, setActiveSection] = useState('home');
            useEffect(() => { lucide.createIcons(); }, [activeSection]);

            return (
                <div className="min-h-screen flex flex-col font-sans text-gray-900 selection:bg-gray-200 selection:text-black">
                    <Navbar activeSection={activeSection} setActiveSection={setActiveSection} />
                    <main className="flex-grow">
                        {activeSection === 'home' && (
                            <>
                                <Hero setActiveSection={setActiveSection} />
                                <NewsSection />
                                <Stats />
                            </>
                        )}
                        {activeSection === 'news' && <NewsSection />}
                        {activeSection === 'research' && <Research />}
                        {activeSection === 'projects' && <Projects />}
                        {activeSection === 'art' && <ArtGallery />}
                        {activeSection === 'cv' && <CVSection />}
                    </main>
                    <ChatWidget />
                    <footer className="bg-white border-t border-gray-200 text-black py-24">
                        <div className="max-w-5xl mx-auto px-6 text-center">
                            <h2 className="text-4xl font-serif mb-8 font-bold">Ready to Build.</h2>
                            <p className="text-gray-500 max-w-xl mx-auto mb-12 font-light">
                                Open to collaborations and PhD opportunities in HCI.
                            </p>
                            <a href="mailto:zhayihan@unc.edu" className="inline-flex items-center gap-2 bg-black text-white px-8 py-4 rounded-full font-medium hover:bg-gray-800 transition-all">
                                zhayihan@unc.edu
                            </a>
                            <div className="mt-24 pt-8 border-t border-gray-100 text-xs text-gray-400 flex justify-between items-center">
                                <span>&copy; 2025 Yihan Zhang.</span>
                                <span className="font-mono">CHAPEL HILL • WENZHOU</span>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>